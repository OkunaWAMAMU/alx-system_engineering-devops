#!/bin/bash

# Using awk to parse and sort Apache log data
awk '
{
    # Extract IP and HTTP status code from each line
    ip = $1
    http_code = $9

    # Count occurrences of each IP + HTTP code combination
    count[ip, http_code]++
}

END {
    # Iterate over the counts and print in the required format
    for (key in count) {
        split(key, indices, SUBSEP)
        ip = indices[1]
        http_code = indices[2]
        print count[key], ip, http_code
    }
}' apache-access.log | sort -nr   # Sort by occurrence number in descending order
